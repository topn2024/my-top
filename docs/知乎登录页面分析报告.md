# çŸ¥ä¹ç™»å½•é¡µé¢åˆ†ææŠ¥å‘Š

## åˆ†ææ—¥æœŸ
2025-12-05

## é¡µé¢URL
https://www.zhihu.com/signin

---

## ä¸€ã€é¡µé¢åŠ è½½æ—¶çš„é»˜è®¤çŠ¶æ€ï¼ˆçŸ­ä¿¡ç™»å½•æ¨¡å¼ï¼‰

### 1.1 å¯†ç ç™»å½•åˆ‡æ¢æŒ‰é’®
```
æ ‡ç­¾: <div>
å±æ€§:
  - role="button"
  - class="SignFlow-tab"
  - text="å¯†ç ç™»å½•"

æœ€ä½³é€‰æ‹©å™¨ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰:
  1. //div[@role='button' and text()='å¯†ç ç™»å½•']  âœ“ æœ€ç²¾ç¡®
  2. //div[@class='SignFlow-tab' and text()='å¯†ç ç™»å½•']  âœ“ å¯ç”¨
  3. //div[text()='å¯†ç ç™»å½•']  âœ“ å¯ç”¨
  4. //div[contains(text(), 'å¯†ç ç™»å½•')]  âœ“ å¯ç”¨
```

### 1.2 è¾“å…¥æ¡†ï¼ˆçŸ­ä¿¡ç™»å½•æ¨¡å¼ï¼‰
```
è¾“å…¥æ¡†1 - æ‰‹æœºå·:
  type='tel'
  name='username'
  placeholder='æ‰‹æœºå·'
  class='Input i7cW1UcwT6ThdhTakqFm username-input'

è¾“å…¥æ¡†2 - çŸ­ä¿¡éªŒè¯ç :
  type='tel'
  name='digits'
  placeholder='è¾“å…¥ 6 ä½çŸ­ä¿¡éªŒè¯ç '
  class='Input i7cW1UcwT6ThdhTakqFm username-input'
```

### 1.3 ç™»å½•æŒ‰é’®
```
type='submit'
text='ç™»å½•/æ³¨å†Œ'
class='Button SignFlow-submitButton FEfUrdfMIKpQDJDqkjte Button--pr'
```

---

## äºŒã€ç‚¹å‡»"å¯†ç ç™»å½•"åçš„é¡µé¢çŠ¶æ€

### 2.1 é¡µé¢å˜åŒ–
- URLä¿æŒä¸å˜ï¼šhttps://www.zhihu.com/signin
- é¡µé¢å†…å®¹åŠ¨æ€åˆ‡æ¢ï¼Œæ— éœ€é‡æ–°åŠ è½½

### 2.2 è¾“å…¥æ¡†ï¼ˆå¯†ç ç™»å½•æ¨¡å¼ï¼‰
```
è¾“å…¥æ¡†1 - ç”¨æˆ·å:
  type='text'  âš ï¸ æ³¨æ„ï¼šä¸æ˜¯telï¼Œæ˜¯text
  name='username'
  placeholder='æ‰‹æœºå·æˆ–é‚®ç®±'
  class='Input i7cW1UcwT6ThdhTakqFm username-input'

è¾“å…¥æ¡†2 - å¯†ç :
  type='password'
  name='password'
  placeholder='å¯†ç '
  class='Input i7cW1UcwT6ThdhTakqFm username-input'

éšè—è¾“å…¥æ¡† - éªŒè¯ç :
  type='hidden'
  name='NECaptchaValidate'
  class='yidun_input'
```

### 2.3 ç™»å½•æŒ‰é’®ï¼ˆå¯†ç ç™»å½•æ¨¡å¼ï¼‰
```
type='submit'
text='ç™»å½•'  âš ï¸ æ³¨æ„ï¼šæ–‡æœ¬ä»"ç™»å½•/æ³¨å†Œ"å˜ä¸º"ç™»å½•"
class='Button SignFlow-submitButton FEfUrdfMIKpQDJDqkjte Button--primary Butt'
```

---

## ä¸‰ã€æœ€ä½³é€‰æ‹©å™¨ç­–ç•¥

### 3.1 å¯†ç ç™»å½•åˆ‡æ¢æŒ‰é’®
```python
# æ¨èæ–¹æ¡ˆ1 - æœ€ç²¾ç¡®
By.XPATH, "//div[@role='button' and text()='å¯†ç ç™»å½•']"

# æ¨èæ–¹æ¡ˆ2 - å¤‡ç”¨
By.XPATH, "//div[text()='å¯†ç ç™»å½•']"
```

### 3.2 ç”¨æˆ·åè¾“å…¥æ¡†
```python
# åˆ‡æ¢åä¼˜å…ˆä½¿ç”¨çš„é€‰æ‹©å™¨ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰:
1. By.NAME, "username"  âœ“ æœ€ç¨³å®š
2. By.XPATH, "//input[@name='username']"  âœ“ æ¨è
3. By.XPATH, "//input[@type='text']"  âš ï¸ å¯èƒ½ä¸å”¯ä¸€
4. By.XPATH, "//input[@placeholder='æ‰‹æœºå·æˆ–é‚®ç®±']"  âœ“ è¯­ä¹‰æ˜ç¡®
```

### 3.3 å¯†ç è¾“å…¥æ¡†
```python
# é€‰æ‹©å™¨ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰:
1. By.NAME, "password"  âœ“ æœ€ç¨³å®š
2. By.XPATH, "//input[@name='password']"  âœ“ æ¨è
3. By.XPATH, "//input[@type='password']"  âœ“ å¯ç”¨
4. By.XPATH, "//input[@placeholder='å¯†ç ']"  âœ“ è¯­ä¹‰æ˜ç¡®
```

### 3.4 ç™»å½•æäº¤æŒ‰é’®
```python
# é€‰æ‹©å™¨ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰:
1. By.XPATH, "//button[@type='submit' and contains(text(), 'ç™»å½•')]"  âœ“ æ¨è
2. By.XPATH, "//button[@type='submit']"  âš ï¸ é¡µé¢æœ‰3ä¸ªsubmitæŒ‰é’®ï¼Œéœ€è¦ç­›é€‰
3. By.XPATH, "//button[contains(@class, 'SignFlow-submitButton')]"  âœ“ æœ€ç²¾ç¡®
```

---

## å››ã€å…³é”®å‘ç°å’Œæ”¹è¿›å»ºè®®

### 4.1 å½“å‰ä»£ç å­˜åœ¨çš„é—®é¢˜
1. âŒ ä½¿ç”¨äº†è¿‡å¤šå†—ä½™çš„é€‰æ‹©å™¨ï¼ˆ10ä¸ªï¼‰ï¼Œå®é™…åªéœ€è¦2-3ä¸ª
2. âš ï¸ æŸäº›é€‰æ‹©å™¨å¯èƒ½ä¸å¤Ÿç²¾ç¡®ï¼Œä¾‹å¦‚ `//span[contains(text(), 'å¯†ç ç™»å½•')]` å®é™…åº”è¯¥æ˜¯ div
3. âœ“ ä»£ç å·²æ­£ç¡®å®ç°äº†å¯†ç ç™»å½•åˆ‡æ¢åŠŸèƒ½

### 4.2 ä¼˜åŒ–å»ºè®®
1. **ç®€åŒ–é€‰æ‹©å™¨åˆ—è¡¨**ï¼šä½¿ç”¨ç»è¿‡éªŒè¯çš„ç²¾ç¡®é€‰æ‹©å™¨
2. **ç»Ÿä¸€ä½¿ç”¨ name å±æ€§**ï¼šç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ¡†éƒ½æœ‰ç¨³å®šçš„ name å±æ€§
3. **æ·»åŠ æ˜ç¡®çš„ç­‰å¾…æ¡ä»¶**ï¼šç­‰å¾…å¯†ç è¾“å…¥æ¡†å‡ºç°ï¼Œç¡®è®¤åˆ‡æ¢æˆåŠŸ
4. **ä¼˜åŒ–ç™»å½•æŒ‰é’®å®šä½**ï¼šä½¿ç”¨ class ç»„åˆå®šä½æ›´å‡†ç¡®

### 4.3 æ¨èçš„ä¼˜åŒ–åé€‰æ‹©å™¨åˆ—è¡¨

#### å¯†ç ç™»å½•åˆ‡æ¢æŒ‰é’®ï¼ˆåªéœ€2ä¸ªå¤‡é€‰ï¼‰ï¼š
```python
[
    "//div[@role='button' and text()='å¯†ç ç™»å½•']",  # æœ€ç²¾ç¡®
    "//div[text()='å¯†ç ç™»å½•']",  # å¤‡ç”¨
]
```

#### ç”¨æˆ·åè¾“å…¥æ¡†ï¼ˆåªéœ€2ä¸ªå¤‡é€‰ï¼‰ï¼š
```python
[
    (By.NAME, "username"),  # æœ€ç¨³å®š
    (By.XPATH, "//input[@type='text' and @name='username']"),  # å¤‡ç”¨
]
```

#### å¯†ç è¾“å…¥æ¡†ï¼ˆåªéœ€2ä¸ªå¤‡é€‰ï¼‰ï¼š
```python
[
    (By.NAME, "password"),  # æœ€ç¨³å®š
    (By.XPATH, "//input[@type='password']"),  # å¤‡ç”¨
]
```

#### ç™»å½•æŒ‰é’®ï¼ˆåªéœ€1ä¸ªï¼‰ï¼š
```python
(By.XPATH, "//button[@type='submit' and contains(@class, 'SignFlow-submitButton')]")
```

---

## äº”ã€éªŒè¯çŠ¶æ€

### 5.1 å¯†ç ç™»å½•åˆ‡æ¢
- âœ… åˆ‡æ¢æŒ‰é’®å®šä½æˆåŠŸ
- âœ… ç‚¹å‡»åé¡µé¢æ­£ç¡®åˆ‡æ¢åˆ°å¯†ç ç™»å½•æ¨¡å¼
- âœ… è¾“å…¥æ¡†ç±»å‹ä» tel å˜ä¸º text/password

### 5.2 è¡¨å•å…ƒç´ å¯ç”¨æ€§
- âœ… ç”¨æˆ·åè¾“å…¥æ¡†: name='username', type='text'
- âœ… å¯†ç è¾“å…¥æ¡†: name='password', type='password'
- âœ… ç™»å½•æŒ‰é’®: type='submit', æ–‡æœ¬='ç™»å½•'

---

## å…­ã€å®ç°ä»£ç å»ºè®®

### 6.1 åˆ‡æ¢åˆ°å¯†ç ç™»å½•æ¨¡å¼
```python
# ç®€åŒ–ç‰ˆæœ¬ - åªä½¿ç”¨éªŒè¯è¿‡çš„é€‰æ‹©å™¨
password_tab_selectors = [
    "//div[@role='button' and text()='å¯†ç ç™»å½•']",  # æœ€ç²¾ç¡®
    "//div[text()='å¯†ç ç™»å½•']",  # å¤‡ç”¨
]

for selector in password_tab_selectors:
    try:
        password_tab = WebDriverWait(self.driver, 5).until(
            EC.element_to_be_clickable((By.XPATH, selector))
        )
        self.driver.execute_script("arguments[0].scrollIntoView(true);", password_tab)
        time.sleep(0.3)
        password_tab.click()
        logger.info("âœ“ Successfully switched to PASSWORD LOGIN mode")

        # ç­‰å¾…å¯†ç è¾“å…¥æ¡†å‡ºç°ï¼Œç¡®è®¤åˆ‡æ¢æˆåŠŸ
        WebDriverWait(self.driver, 3).until(
            EC.presence_of_element_located((By.NAME, "password"))
        )
        break
    except Exception:
        continue
```

### 6.2 è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
```python
# è¾“å…¥ç”¨æˆ·å - ä½¿ç”¨æœ€ç®€å•çš„ name å®šä½
username_input = WebDriverWait(self.driver, 5).until(
    EC.presence_of_element_located((By.NAME, "username"))
)
username_input.clear()
username_input.send_keys(username)

# è¾“å…¥å¯†ç  - ä½¿ç”¨æœ€ç®€å•çš„ name å®šä½
password_input = WebDriverWait(self.driver, 5).until(
    EC.presence_of_element_located((By.NAME, "password"))
)
password_input.clear()
password_input.send_keys(password)
```

### 6.3 ç‚¹å‡»ç™»å½•æŒ‰é’®
```python
# ä½¿ç”¨ class ç»„åˆå®šä½æœ€å‡†ç¡®
login_button = WebDriverWait(self.driver, 5).until(
    EC.element_to_be_clickable((
        By.XPATH,
        "//button[@type='submit' and contains(@class, 'SignFlow-submitButton')]"
    ))
)
login_button.click()
```

---

## ä¸ƒã€æ€»ç»“

1. âœ… çŸ¥ä¹ç™»å½•é¡µé¢é»˜è®¤ä½¿ç”¨çŸ­ä¿¡ç™»å½•æ¨¡å¼
2. âœ… éœ€è¦ç‚¹å‡»"å¯†ç ç™»å½•"æŒ‰é’®åˆ‡æ¢æ¨¡å¼
3. âœ… åˆ‡æ¢åè¾“å…¥æ¡†å±æ€§å‘ç”Ÿå˜åŒ–ï¼ˆtel â†’ text/passwordï¼‰
4. âœ… å½“å‰ä»£ç å·²å®ç°å¯†ç ç™»å½•åˆ‡æ¢åŠŸèƒ½
5. ğŸ“Š å»ºè®®ç®€åŒ–é€‰æ‹©å™¨ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§
6. ğŸ“Š å»ºè®®æ·»åŠ åˆ‡æ¢æˆåŠŸçš„æ˜ç¡®éªŒè¯ï¼ˆç­‰å¾…å¯†ç æ¡†å‡ºç°ï¼‰
