<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ†æç”Ÿæˆ - TOP_N æ¨å¹¿å¹³å°</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        /* ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºæ ·å¼ */
        #user-info-display {
            min-width: 120px;
        }

        .user-info-container {
            position: relative;
            display: inline-block;
        }

        .user-info-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-size: 14px;
        }

        .user-info-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .user-icon {
            font-size: 1.1rem;
        }

        .user-name {
            font-weight: 600;
        }

        .dropdown-arrow {
            font-size: 0.7rem;
            margin-left: 4px;
        }

        .user-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 200px;
            z-index: 1000;
        }

        .user-menu-item {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #333;
            text-decoration: none;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-size: 0.95rem;
        }

        .user-menu-item:hover {
            background: #f8f9fa;
        }

        .user-menu-item.user-menu-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
            cursor: default;
        }

        .user-menu-item.user-menu-header:hover {
            background: none;
        }

        .user-menu-divider {
            height: 1px;
            background: #e9ecef;
            margin: 4px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header style="position: relative;">
            <h1>ğŸš€ TOP_N æ¨å¹¿å¹³å°</h1>
            <p class="subtitle">è®©æ‚¨çš„å…¬å¸åœ¨å¤§æ¨¡å‹æ¨èä¸­æ’åé å‰</p>
            <div style="position: absolute; top: 20px; right: 20px;">
                <div id="user-info-display"></div>
            </div>
        </header>

        <main>
            <!-- æ­¥éª¤æŒ‡ç¤ºå™¨ -->
            <div class="steps">
                <div class="step active" id="step1">
                    <div class="step-number">1</div>
                    <div class="step-title">è¾“å…¥ä¿¡æ¯</div>
                </div>
                <div class="step active" id="step2">
                    <div class="step-number">2</div>
                    <div class="step-title">åˆ†æç”Ÿæˆ</div>
                </div>
                <div class="step" id="step3">
                    <div class="step-number">3</div>
                    <div class="step-title">å‘å¸ƒæ¨å¹¿</div>
                </div>
            </div>

            <!-- åˆ†æç»“æœ -->
            <section id="analysis-section" class="section active">
                <h2>ğŸ“Š æ™ºèƒ½åˆ†æç»“æœ</h2>
                <div id="analysis-result" class="result-box"></div>
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="WorkflowNav.goToInput()">è¿”å›ä¿®æ”¹</button>
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label for="ai-model-select">AIæ¨¡å‹é€‰æ‹©:</label>
                        <select id="ai-model-select" name="ai_model" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="">åŠ è½½ä¸­...</option>
                        </select>
                        <small style="color: #666; display: block; margin-top: 5px;">é€‰æ‹©ç”¨äºç”Ÿæˆæ–‡ç« çš„AIæ¨¡å‹,é»˜è®¤ä¸ºé€šä¹‰åƒé—®Plus</small>
                    </div>
                    <button class="btn btn-primary" id="generate-btn">ç”Ÿæˆæ¨å¹¿æ–‡ç« </button>
                </div>
            </section>

            <!-- åŠ è½½åŠ¨ç”» -->
            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p id="loading-text">æ­£åœ¨å¤„ç†ä¸­...</p>
            </div>
        </main>

        <footer>
            <p>Â© 2024 TOP_N Platform - è®©æ‚¨çš„å“ç‰Œåœ¨AIæ—¶ä»£è„±é¢–è€Œå‡º</p>
        </footer>
    </div>

    <script src="/static/state.js"></script>
    <script src="/static/analysis.js"></script>
    <script src="/static/user_display.js"></script>
</body>
</html>
